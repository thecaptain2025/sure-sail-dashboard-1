/* ==========================================================
   Sure Sail Dashboard â€” Responsive Fix Pack (Paste Whole File)
   - Desktop: 3 columns (Nav | Stage I | Stage II)
   - Tablet: 2 columns (Nav | Stages stacked)
   - Mobile: 1 column (stack)
   - Prevents overlap/skew from fixed widths/absolute layouts
   - Adds neon execution glow + header wipe animation hooks
   ========================================================== */

/* ---------- Root / Reset ---------- */
:root{
  --maxW: 1240px;
  --g: 18px;

  --radius: 20px;
  --panelPad: 18px;

  --ink: #1b1b1b;
  --muted: rgba(0,0,0,.55);

  --parchmentA: #f3ead3;
  --parchmentB: #e6d7b3;

  --panelBg: rgba(245, 236, 214, .75);
  --panelBg2: rgba(239, 229, 204, .75);

  --stroke: rgba(0,0,0,.22);
  --stroke2: rgba(0,0,0,.14);

  --shadow: 0 10px 30px rgba(0,0,0,.12);
  --shadowSoft: 0 8px 18px rgba(0,0,0,.09);

  --buttonBg: #234e56;
  --buttonBg2: #1c4046;
  --buttonInk: #f7f4ea;

  --accentBlue: #1b77d7;

  --neonA: rgba(120, 255, 255, .60);
  --neonB: rgba(120, 255, 255, .35);

  --panelMaxHDesktop: 520px;
}

*{ box-sizing: border-box; }
html, body{ height: 100%; }
body{
  margin: 0;
  color: var(--ink);
  font-family: ui-serif, Georgia, "Times New Roman", serif;

  /* parchment background */
  background:
    radial-gradient(1200px 600px at 50% 0%, rgba(255,255,255,.35), rgba(255,255,255,0) 60%),
    linear-gradient(180deg, var(--parchmentA), var(--parchmentB));
}

img, svg{ max-width: 100%; height: auto; }

/* ---------- Page Wrapper ---------- */
.ss-shell{
  width: min(var(--maxW), calc(100% - 24px));
  margin: 0 auto;
  padding: 18px 0 40px;
}

/* ---------- Header / Top Bar ---------- */
.ss-header{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 14px;

  padding: 12px 14px;
  border-radius: var(--radius);
  background: rgba(255,255,255,.30);
  border: 1px solid var(--stroke2);
  box-shadow: var(--shadowSoft);
  backdrop-filter: blur(2px);
}

.ss-brand{
  display: flex;
  align-items: center;
  gap: 12px;
}

.ss-brand .logo{
  width: 34px;
  height: 34px;
  display: grid;
  place-items: center;
}

.ss-title{
  font-size: clamp(28px, 3vw, 54px);
  font-weight: 800;
  letter-spacing: .4px;
  margin: 0;
}

.ss-header-right{
  display: flex;
  align-items: center;
  gap: 14px;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.ss-runid{
  font-weight: 700;
  color: rgba(0,0,0,.70);
}

/* Checkbox row (Neon/Ocean) */
.ss-toggle{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-weight: 700;
  color: rgba(0,0,0,.65);
}

.ss-toggle input{
  width: 20px;
  height: 20px;
}

/* Run Scan button */
.ss-btn{
  appearance: none;
  border: 1px solid rgba(0,0,0,.25);
  background: linear-gradient(180deg, var(--buttonBg), var(--buttonBg2));
  color: var(--buttonInk);
  font-weight: 800;
  letter-spacing: .6px;
  border-radius: 14px;
  padding: 12px 16px;
  box-shadow: 0 8px 18px rgba(0,0,0,.18);
  cursor: pointer;
}
.ss-btn:active{ transform: translateY(1px); }

/* ---------- Main Grid Layout ---------- */
.ss-grid{
  margin-top: 16px;

  display: grid;
  gap: var(--g);
  align-items: start;

  /* Desktop: 3 columns */
  grid-template-columns: 300px 1fr 1fr;
}

/* Tablet: Nav left + stages stacked */
@media (max-width: 1100px){
  .ss-grid{
    grid-template-columns: 280px 1fr;
    grid-template-areas:
      "nav stage1"
      "nav stage2";
  }
  .ss-nav{ grid-area: nav; }
  .ss-stage-1{ grid-area: stage1; }
  .ss-stage-2{ grid-area: stage2; }
}

/* Mobile: stack everything */
@media (max-width: 780px){
  .ss-grid{
    grid-template-columns: 1fr;
    grid-template-areas:
      "nav"
      "stage1"
      "stage2";
  }

  .ss-header{
    align-items: flex-start;
    flex-direction: column;
  }

  .ss-header-right{
    justify-content: flex-start;
  }
}

/* ---------- Universal Panel Style ---------- */
.ss-panel{
  border-radius: var(--radius);
  padding: var(--panelPad);

  background: linear-gradient(180deg, var(--panelBg), var(--panelBg2));
  border: 2px solid rgba(0,0,0,.18);

  box-shadow: var(--shadow);
  position: relative;

  /* helps avoid squeeze / overlap */
  min-width: 0;
}

/* Optional inset parchment frame */
.ss-panel::before{
  content: "";
  position: absolute;
  inset: 10px;
  border-radius: calc(var(--radius) - 10px);
  border: 2px solid rgba(0,0,0,.10);
  pointer-events: none;
}

/* Panel header row */
.panel-head{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;

  padding-bottom: 10px;
  border-bottom: 2px solid rgba(0,0,0,.15);
  margin-bottom: 12px;
}

/* Header wipe animation when switching ðŸ“˜ / âš™ */
.panel-head.wipe{
  position: relative;
  overflow: hidden;
}
.panel-head.wipe::after{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(90deg,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,.55) 45%,
    rgba(255,255,255,0) 100%);
  transform: translateX(-120%);
  animation: headerWipe .55s ease forwards;
  pointer-events:none;
}
@keyframes headerWipe{
  to{ transform: translateX(120%); }
}

.panel-title{
  font-size: 20px;
  font-weight: 900;
  margin: 0;
}

.panel-tools{
  display: inline-flex;
  gap: 8px;
  align-items: center;
}

/* ðŸ“˜ / âš™ icon buttons */
.icon-btn{
  width: 40px;
  height: 40px;
  border-radius: 12px;
  border: 2px solid rgba(0,0,0,.20);
  background: rgba(255,255,255,.25);
  display: grid;
  place-items: center;
  cursor: pointer;
  user-select: none;
}
.icon-btn:active{ transform: translateY(1px); }

.icon-btn .ico{
  font-size: 18px;
  line-height: 1;
}

/* Panel content container */
.panel-body{
  min-width: 0;
}

/* Keep tall content readable with internal scrolling */
.panel-body.scroll{
  max-height: var(--panelMaxHDesktop);
  overflow: auto;
  padding-right: 6px;
}

/* Mobile: allow more vertical space */
@media (max-width: 780px){
  .panel-body.scroll{
    max-height: 65vh;
  }
}

/* ---------- Left Nav Panel ---------- */
.ss-nav .nav-btn{
  width: 100%;
  display: block;
  text-align: left;

  margin: 10px 0;
  padding: 16px 18px;

  border-radius: 16px;
  border: 2px solid rgba(0,0,0,.18);
  background: rgba(255,255,255,.20);

  font-weight: 900;
  color: var(--accentBlue);
  font-size: 18px;
  cursor: pointer;
}
.ss-nav .nav-btn:active{ transform: translateY(1px); }

.ss-nav .nav-footer{
  margin-top: 18px;
  padding-top: 12px;
  border-top: 2px solid rgba(0,0,0,.12);
}

/* ---------- Stage Containers ---------- */
.ss-stage-1, .ss-stage-2{
  min-width: 0;
}

/* Stage layout internal grid (Stage I example: 2-up panels) */
.stage-grid-2{
  display: grid;
  gap: var(--g);
  grid-template-columns: 1fr 1fr;
  align-items: start;
}

@media (max-width: 780px){
  .stage-grid-2{
    grid-template-columns: 1fr;
  }
}

/* Stage II tool list buttons */
.tool-list{
  display: grid;
  gap: 14px;
}

.tool-btn{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;

  padding: 14px 16px;
  border-radius: 16px;

  border: 2px solid rgba(0,0,0,.22);
  background: rgba(35, 35, 35, .08);

  font-weight: 900;
  color: var(--accentBlue);
  cursor: pointer;
}

.tool-btn .left{
  display: inline-flex;
  align-items: center;
  gap: 12px;
}
.tool-btn .pill{
  padding: 6px 10px;
  border-radius: 12px;
  border: 2px solid rgba(0,0,0,.18);
  background: rgba(255,255,255,.20);
  font-weight: 900;
  color: var(--accentBlue);
}

/* Locked / disabled tools */
.tool-btn.is-locked{
  opacity: .55;
  filter: grayscale(.15);
  cursor: not-allowed;
}

/* ---------- Progress Bars ---------- */
.progress-row{
  display: grid;
  grid-template-columns: 1fr 160px;
  gap: 14px;
  align-items: center;
  margin-top: 10px;
}

.progress-label{
  font-weight: 900;
  color: rgba(0,0,0,.75);
}

.progress-track{
  height: 18px;
  border-radius: 999px;
  border: 2px solid rgba(0,0,0,.22);
  background: rgba(255,255,255,.20);
  overflow: hidden;
}

.progress-fill{
  height: 100%;
  width: 40%; /* JS can set this */
  background: linear-gradient(90deg, rgba(252, 221, 135, .95), rgba(218, 187, 98, .95));
}

/* ---------- Execution / Neon Light Show ---------- */
.ss-panel{
  transition: box-shadow .25s ease, filter .25s ease, border-color .25s ease;
}

/* universal glow */
.neon-on .ss-panel.is-executing{
  border-color: rgba(120,255,255,.55);
  box-shadow:
    0 0 0 3px var(--neonA),
    0 0 22px var(--neonB),
    0 14px 30px rgba(0,0,0,.14);
  filter: brightness(1.06);
}

/* Optional orchestration pulse delay classes (JS can apply) */
.neon-on .ss-panel.is-executing.delay-1{ transition-delay: .05s; }
.neon-on .ss-panel.is-executing.delay-2{ transition-delay: .10s; }
.neon-on .ss-panel.is-executing.delay-3{ transition-delay: .15s; }
.neon-on .ss-panel.is-executing.delay-4{ transition-delay: .20s; }

/* ---------- Safety Overrides (kills skew culprits) ---------- */
/* If an older CSS used absolute positioning or fixed sizes, this prevents overlap */
.ss-nav, .ss-stage-1, .ss-stage-2{
  position: relative;
  left: auto;
  top: auto;
  right: auto;
  bottom: auto;
  transform: none;
  max-width: 100%;
}

/* Force panels to behave in-flow */
.ss-stage-1 .ss-panel,
.ss-stage-2 .ss-panel,
.ss-nav .ss-panel{
  position: relative !important;
  left: auto !important;
  top: auto !important;
  right: auto !important;
  bottom: auto !important;
  width: auto !important;
  max-width: 100% !important;
  transform: none !important;
}

/* ---------- Small Helpers ---------- */
.muted{ color: var(--muted); }
.center{ text-align: center; }

/* Prevent long labels from blowing up layout */
.panel-title, .tool-btn, .progress-label{
  min-width: 0;
  overflow-wrap: anywhere;
}
